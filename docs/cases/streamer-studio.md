# Case: Streamer Studio Flow (пример использования)

## Цель
Монетизация стрима: донаты, премиум подписки, интерактивные голосования, магазин мерча.

## Компоненты
- Telegram Bot — взятие донатов, нотификации, выдача скидок/звёзд.
- Web App — витрина магазина, управление товарами, checkout (звёзды или внешние платежи).
- Admin Panel — просмотр транзакций, управление товарами, управление промокодами.
- Realtime — обновления топ донатеров / leaderboard.

## Поток примера: донат через бот (XTR)
1. Зритель нажимает Donate в Telegram WebApp.
2. Генерируется invoice (`createInvoice`) с `metadata: {type: 'donation', streamer_id: X}`.
3. Пользователь оплачивает (звёзды либо fiat через Telegram invoice).
4. Webhook обрабатывает оплату, увеличивает `users.metadata.starsBalance` (если fiat → начислить эквивалент XTR), и отправляет сообщение в канал/чат стримера.
5. Leaderboard обновляется в realtime и показывается на сайте.

## Дополнительно
- Механика “challenge” — при достижении порога донатов запускается автоматический интерактив (например, change overlay).
- Реферальная система: начисление звезд за привлечение новых донатеров.